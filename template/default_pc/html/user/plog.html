<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      {:platform_lang('platform/user_plog')} - {:platform_lang('platform/user')}
      - {$maccms.site_name}
    </title>
    <meta
      name="keywords"
      content="{:platform_lang('platform/user')},{$maccms.site_keywords}"
    />
    <meta name="description" content="{$maccms.site_description}" />
    {include file="user/include"}
  </head>
  <body class="{$maccms['html_hue']} fed-min-width">
    {include file="system/headtop"}
    <div class="container">
      {include file="system/search"} {include file="system/headmeun"}
      <div class="fed-min-width">
        <div class="fed-part-case">
          <div class="fed-user-head fed-margin-top fed-back-whits">
            <div
              class="fed-list-pics fed-lazy fed-part-5by2 fed-part-rows"
              style="background: url({$maccms.path}MDassets/images/user.jpg)"
            >
              <div class="fed-part-core fed-text-center">
                <div
                  class="fed-user-image"
                  data-role="{:mac_url('user/portrait')}"
                >
                  <img
                    class="face fed-user-avat fed-part-roun"
                    src="{$obj.user_portrait|mac_default='static/images/touxiang.png'|mac_url_img}?v={:time()}"
                  />
                </div>
                <span class="fed-visible fed-text-white fed-padding"
                  >{$obj.user_name}</span
                >
              </div>
            </div>
            <div class="fed-padding fed-part-rows fed-back-whits fed-hide-md">
              <ul class="fed-user-brief fed-part-rows fed-back-whits">
                <li class="fed-padding-x fed-text-center fed-col-xs4">
                  <span class="fed-visible fed-text-gules"
                    >{$obj.user_points}</span
                  >
                  <span class="fed-visible"
                    >{:platform_lang('platform/user/plog/user_point')}</span
                  >
                </li>
                <li
                  class="
                    fed-padding-x fed-text-center fed-line-left fed-col-xs4
                  "
                >
                  <span class="fed-visible fed-text-gules"
                    >{$obj.group.group_name}</span
                  >
                  <span class="fed-visible"
                    >{:platform_lang('platform/user/plog/user_level')}</span
                  >
                </li>
                <li
                  class="
                    fed-padding-x fed-text-center fed-line-left fed-col-xs4
                  "
                >
                  <span class="fed-visible fed-text-gules"
                    >{$obj.user_login_num}</span
                  >
                  <span class="fed-visible"
                    >{:platform_lang('platform/user/plog/user_login_count')}</span
                  >
                </li>
              </ul>
            </div>
          </div>
          <div class="fed-part-rows">
            <div
              class="
                fed-main-left
                fed-col-xs12
                fed-col-md4
                fed-col-lg3
                fed-hide-xs
                fed-hide-sm
                fed-show-md-block
              "
            >
              {include file="user/menu"}
            </div>
            <div class="fed-main-right fed-col-xs12 fed-col-md8 fed-col-lg9">
              <div class="fed-part-layout fed-back-whits">
                <div
                  class="
                    fed-user-title
                    fed-list-head
                    fed-part-rows
                    fed-padding
                    fed-line-bottom
                  "
                >
                  <h2 class="fed-font-xvi fed-padding">
                    {:platform_lang('platform/user/plog/point_log')}
                  </h2>
                  <ul class="fed-part-tips fed-padding">
                    <li class="fed-padding">
                      <a class="fed-more" href="{:mac_url('user/index')}"
                        >{:platform_lang('platform/user/return_btn')}</a
                      >
                    </li>
                  </ul>
                </div>
                <form
                  class="fed-user-form fed-user-info"
                  id="form1"
                  name="form1"
                  method="post"
                >
                  <ul class="fed-padding-v fed-part-rows">
                    <li
                      class="
                        fed-padding-v fed-col-xs3 fed-col-md1 fed-part-rows
                      "
                    >
                      <a
                        class="
                          fed-col-xs12
                          fed-rims-info
                          fed-btns-info
                          fed-btns-green
                        "
                        href="javascript:;"
                        onclick="MAC.CheckBox.All('ids[]');"
                        >{:platform_lang('platform/user/select_all_btn')}</a
                      >
                    </li>
                    <li
                      class="
                        fed-padding-v fed-col-xs3 fed-col-md1 fed-part-rows
                      "
                    >
                      <a
                        class="
                          fed-col-xs12
                          fed-rims-info
                          fed-btns-info
                          fed-btns-green
                        "
                        href="javascript:;"
                        onclick="MAC.CheckBox.Other('ids[]');"
                        >{:platform_lang('platform/user/unselect_all_btn')}</a
                      >
                    </li>
                    <li
                      class="
                        fed-padding-v fed-col-xs3 fed-col-md1 fed-part-rows
                      "
                    >
                      <a
                        class="
                          fed-plog-del
                          fed-col-xs12
                          fed-rims-info
                          fed-btns-info
                          fed-btns-green
                        "
                        href="javascript:;"
                        id="btnDel"
                        >{:platform_lang('platform/user/delete_btn')}</a
                      >
                    </li>
                    <li
                      class="
                        fed-padding-v fed-col-xs3 fed-col-md1 fed-part-rows
                      "
                    >
                      <a
                        class="
                          fed-plog-clear
                          fed-col-xs12
                          fed-rims-info
                          fed-btns-info
                          fed-btns-green
                        "
                        href="javascript:;"
                        id="btnClear"
                        >{:platform_lang('platform/user/clear_btn')}</a
                      >
                    </li>
                  </ul>
                  <ul class="fed-user-list fed-part-rows fed-line-top">
                    <li class="fed-padding-x fed-part-rows">
                      <div
                        class="
                          fed-user-input fed-visible fed-font-xvi fed-part-rows
                        "
                      >
                        <span class="fed-col-xs2 fed-col-sm2 fed-part-eone"
                          >{:platform_lang('platform/user/plog/log_choose')}</span
                        >
                        <span class="fed-col-xs5 fed-col-sm3 fed-part-eone"
                          >{:platform_lang('platform/user/plog/log_point_type')}</span
                        >
                        <span
                          class="
                            fed-col-xs5 fed-col-sm2 fed-part-eone fed-text-right
                          "
                          >{:platform_lang('platform/user/plog/log_point')}</span
                        >
                        <span
                          class="
                            fed-hide-xs fed-col-sm5 fed-part-eone fed-text-right
                          "
                          >{:platform_lang('platform/user/plog/log_time')}</span
                        >
                      </div>
                    </li>
                    {volist name="list" id="vo"}
                    <li class="fed-padding-x fed-part-rows fed-line-bottom">
                      <div
                        class="
                          fed-user-input fed-visible fed-font-xvi fed-part-rows
                        "
                      >
                        <span class="fed-col-xs2 fed-col-sm2 fed-part-eone"
                          ><input
                            class="fed-form-comp"
                            name="ids[]"
                            type="checkbox"
                            value="{$vo.plog_id}"
                        /></span>
                        <span class="fed-col-xs5 fed-col-sm3 fed-part-eone"
                          >{$vo.plog_type|mac_get_plog_type_text}</span
                        >
                        <span
                          class="
                            fed-col-xs5 fed-col-sm2 fed-part-eone fed-text-right
                          "
                          >{if
                          condition="in_array($vo.plog_type,[1,2,3,4])"}+{else/}-{/if}{$vo.plog_points}</span
                        >
                        <span
                          class="
                            fed-hide-xs fed-col-sm5 fed-part-eone fed-text-right
                          "
                          >{$vo.plog_time|mac_day}</span
                        >
                      </div>
                    </li>
                    {/volist}
                  </ul>
                  {if$__PAGING__.page_total>1}
                  <div class="fed-page-info fed-text-center">
                    <a
                      class="
                        fed-btns-info fed-rims-info fed-hide
                        fed-show-xs-inline{if$__PAGING__['page_current']==1}
                        fed-btns-disad{/if}
                      "
                      href="{$__PAGING__.page_url|mac_url_page=1}"
                      >{:platform_lang('platform/user/first_page_btn')}</a
                    >
                    <a
                      class="
                        fed-btns-info
                        fed-rims-info{if$__PAGING__['page_current']==1}
                        fed-btns-disad{/if}
                      "
                      href="{$__PAGING__.page_url|mac_url_page=$__PAGING__.page_prev}"
                      >{:platform_lang('platform/user/previous_page_btn')}</a
                    >
                    {if$__PAGING__.page_current>3}
                    <a
                      class="
                        fed-btns-info fed-rims-info fed-hide fed-show-sm-inline
                      "
                      href="{$__PAGING__.page_url|mac_url_page=1}"
                      >1</a
                    >
                    <a
                      class="
                        fed-btns-info
                        fed-rims-info
                        fed-hide
                        fed-show-sm-inline
                        fed-btns-disad
                      "
                      href="javascript:;"
                      >...</a
                    >
                    {/if} {maccms:foreach name="$__PAGING__.page_num" id="num"}
                    <a
                      class="
                        fed-btns-info fed-rims-info fed-hide
                        fed-show-sm-inline{if$__PAGING__['page_current']==$num}
                        fed-btns-green{/if}
                      "
                      href="{if$__PAGING__['page_current']==$num}javascript:;{else}{$__PAGING__.page_url|mac_url_page=$num}{/if}"
                      >{$num}</a
                    >
                    {/maccms:foreach}
                    {if$__PAGING__.page_current<($__PAGING__.page_total-2)}
                    <a
                      class="
                        fed-btns-info
                        fed-rims-info
                        fed-hide
                        fed-show-sm-inline
                        fed-btns-disad
                      "
                      href="javascript:;"
                      >...</a
                    >
                    <a
                      class="
                        fed-btns-info fed-rims-info fed-hide fed-show-sm-inline
                      "
                      href="{$__PAGING__.page_url|mac_url_page=$__PAGING__.page_total}"
                      >{$__PAGING__.page_total}</a
                    >
                    {/if}
                    <a
                      class="
                        fed-btns-info fed-rims-info fed-hide fed-show-xs-inline
                      "
                      href="javascript:;"
                      >{$__PAGING__.page_current}/{$__PAGING__.page_total}</a
                    >
                    <a
                      class="
                        fed-btns-info
                        fed-rims-info{if$__PAGING__['page_current']==$__PAGING__.page_total}
                        fed-btns-disad{/if}
                      "
                      href="{$__PAGING__.page_url|mac_url_page=$__PAGING__.page_next}"
                      >{:platform_lang('platform/user/next_page_btn')}</a
                    >
                    <a
                      class="
                        fed-btns-info fed-rims-info fed-hide
                        fed-show-xs-inline{if$__PAGING__['page_current']==$__PAGING__.page_total}
                        fed-btns-disad{/if}
                      "
                      href="{$__PAGING__.page_url|mac_url_page=$__PAGING__.page_total}"
                      >{:platform_lang('platform/user/last_page_btn')}</a
                    >
                  </div>
                  {/if}{if$__PAGING__.record_total!=0}
                  <script type="text/javascript">
                    if (document.getElementById("fed-now"))
                      document.getElementById("fed-now").innerHTML =
                        "{$__PAGING__.page_current}";
                    if (document.getElementById("fed-count"))
                      document.getElementById("fed-count").innerHTML =
                        "{$__PAGING__.record_total}";
                  </script>
                  {/if}
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function delData(ids, all) {
        var msg = "{:platform_lang('platform/user/del_log')}";
        if (all == 1) {
          msg = "{:platform_lang('platform/user/del_log_all')}";
        }
        layer.confirm(
          "<h3>" + msg + "</h3>",
          {
            title: "{:platform_lang('platform/user/confirm_title')}",
            btn: [
              "{:platform_lang('platform/user/confirm_btn')}",
              "{:platform_lang('platform/user/cancel_btn')}",
            ], //按钮
          },
          function () {
            $.post(
              "{:url('user/plog_del')}",
              { ids: ids, all: all },
              function (data) {
                if (data.code == "1") {
                  layer.msg(
                    "{:platform_lang('platform/user/titp_del_success')}"
                  );
                  location.reload();
                } else {
                  layer.msg(
                    "{:platform_lang('platform/user/titp_del_false')}" +
                      data.msg
                  );
                }
              },
              "json"
            );
          }
        );
      }
      $("#btnClear").click(function () {
        delData("", 1);
      });
      $("#btnDel").click(function () {
        var ids = MAC.CheckBox.Ids("ids[]");
        if (ids == "") {
          layer.msg("{:platform_lang('platform/user/titp_data_select_error')}");
          return;
        }
        delData(ids, 0);
      });

      $(".face").imageUpload({
        formAction: "{:url('user/portrait')}",
        inputFileName: "file",
        browseButtonValue: "",
        browseButtonClass:
          "btn btn-default btn-xs fed-user-alter fed-part-roun fed-icon-font fed-icon-xiugai",
        automaticUpload: true,
        hideDeleteButton: true,
        hover: true,
      });
      $(".jQuery-image-upload-controls").mouseenter(function () {
        $(".jQuery-image-upload-controls").css("display", "block");
      });
      $(".jQuery-image-upload-controls").mouseleave(function () {
        $(".jQuery-image-upload-controls").css("display", "none");
      });
      $(".face").on("imageUpload.uploadFailed", function (ev, err) {
        layer.msg(err);
      });
    </script>
    {include file="system/footer"}
  </body>
</html>
